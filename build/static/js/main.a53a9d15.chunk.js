(this["webpackJsonpmy-todo"]=this["webpackJsonpmy-todo"]||[]).push([[0],{56:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return fe}));var a=n(1),r=n(29),c=n.n(r),i=n(8),o=n(28),u=n(22),s=n(38),l=n(41),b=n(31),j="SIGN_IN",d=function(e){return{type:"SIGN_IN",payload:{isSignedIn:!0,role:e.role,uid:e.uid,userName:e.userName}}},f="SIGN_OUT",p={users:{isSignedIn:!1,uid:"",userName:"",role:""}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.users,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(b.a)(Object(b.a)({},e),t.payload);case f:return Object(b.a)({},t.payload);default:return e}};var x=n(20),h=(n(56),n(18)),g=n(11),m=n(13),v=n(15),y=n.n(v),w=n(26),k=n(9),N=n(24);n(58),n(64),n(65),n(66);N.a.initializeApp({apiKey:"AIzaSyBxyM78ThyO9BxgNNMNuUn1MsBBzTKJoCg",authDomain:"my-todo-app-9855c.firebaseapp.com",projectId:"my-todo-app-9855c",storageBucket:"my-todo-app-9855c.appspot.com",messagingSenderId:"1073370607895",appId:"1:1073370607895:web:91e0ea3e3b2b3832850752",measurementId:"G-18E83P77FW"});var S,C,I,P,z,B,E,_,A,F=N.a.auth(),G=new N.a.auth.GoogleAuthProvider,T=N.a.firestore(),U=(N.a.storage(),N.a.functions(),N.a.firestore.Timestamp),L=n(12),W=n(2),J=L.a.div(S||(S=Object(g.a)(["\n  margin-bottom: 16px;\n  width: 100%;\n  position: relative;\n"]))),M=L.a.input(C||(C=Object(g.a)(['\n  height: 40px;\n  width: 100%;\n  caret-color: "#fff";\n  color: #fff;\n  &[type="text"],\n  &[type="password"] {\n    padding: 0 24px;\n    border: 1px solid #fff;\n    border-radius: 20px;\n  }\n  &::placeholder {\n    color: #fff;\n    opacity: 0.5;\n  }\n']))),R=function(e){return Object(W.jsx)(J,{children:Object(W.jsx)(M,{type:e.type?e.type:"text",placeholder:e.label,value:e.value,onChange:function(t){return e.onChange(t)}})})},D=L.a.button(I||(I=Object(g.a)(["\n  height: 40px;\n  width: 100%;\n  background: #fff;\n  border: none;\n  border-radius: 20px;\n  color: #585858;\n  font-size: 16px;\n  transition: background 300ms ease-out;\n  cursor: pointer;\n  &:hover {\n    background: #dadada;\n  }\n"]))),K=function(e){return Object(W.jsx)(D,{onClick:function(){return e.action()},children:e.label})},q=L.a.a(P||(P=Object(g.a)(["\n  color: #fff;\n  cursor: pointer;\n  opacity: 1;\n  text-decoration: none;\n  transition: opacity 200ms ease-out;\n  &:hover {\n    opacity: 0.7;\n  }\n"]))),H=function(e){return Object(W.jsx)(q,{href:"#",onClick:function(){return e.action()},children:e.text})},Q=L.a.div(z||(z=Object(g.a)(["\n  .login-title {\n    font-size: 24px;\n    margin-bottom: 32px;\n    color: #fff;\n  }\n\n  .separator-text {\n    margin: 24px 0;\n    color: #fff;\n  }\n\n  .sub-menu {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 16px;\n    color: #fff;\n  }\n"]))),V=function(){var e=Object(i.d)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],c=n[1],o=Object(a.useCallback)((function(e){c(e.target.value)}),[c]);return Object(W.jsxs)(Q,{children:[Object(W.jsx)("h2",{className:"login-title",children:"Reset Password"}),Object(W.jsx)(R,{label:"email",value:r,onChange:o}),Object(W.jsx)(K,{label:"Reset Password",action:function(){return e(function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e){t.next=5;break}return alert("\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u672a\u5165\u529b\u3067\u3059"),t.abrupt("return",!1);case 5:F.sendPasswordResetEmail(e).then((function(){alert("\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u7528\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"),n(Object(k.d)("/signin"))}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r))}}),Object(W.jsxs)("div",{className:"sub-menu",children:[Object(W.jsx)(H,{text:"",action:function(){return alert("forget")}}),Object(W.jsx)(H,{text:"Back to SignIn",action:function(){return e(Object(k.d)("/signin"))}})]})]})},X=L.a.div(B||(B=Object(g.a)(["\n  .login-title {\n    font-size: 24px;\n    margin-bottom: 32px;\n    color: #fff;\n  }\n\n  .separator-text {\n    margin: 24px 0;\n    color: #fff;\n  }\n\n  .sub-menu {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 16px;\n    color: #fff;\n  }\n"]))),Y=function(){var e=Object(i.d)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),u=Object(m.a)(o,2),s=u[0],l=u[1],b=Object(a.useCallback)((function(e){c(e.target.value)}),[c]),j=Object(a.useCallback)((function(e){l(e.target.value)}),[l]);return Object(W.jsxs)(X,{children:[Object(W.jsx)("h2",{className:"login-title",children:"Login"}),Object(W.jsx)(K,{label:"Login with Google",action:function(){return e(function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.signInWithPopup(G).then((function(e){var n=e.user,a=U.now();if(n){t(d({isSignedIn:!0,role:"customer",uid:n.uid,userName:n.displayName||""}));var r={created_at:a,email:n.email,role:"cusotmer",uid:n.uid,update_at:a,username:n.displayName};T.collection("users").doc(n.uid).set(r).then((function(){return t(Object(k.d)("/"))}))}t(Object(k.d)("/"))})).catch((function(e){return alert(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),Object(W.jsx)("p",{className:"separator-text",children:"or"}),Object(W.jsx)(R,{label:"email",value:r,onChange:b}),Object(W.jsx)(R,{label:"password",type:"password",value:s,onChange:j}),Object(W.jsx)(K,{label:"Login",action:function(){return e(function(e,t){return function(){var n=Object(w.a)(y.a.mark((function n(a){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e&&""!==t){n.next=3;break}return alert("\u672a\u5165\u529b"),n.abrupt("return",!1);case 3:F.signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;if(t){var n=t.uid;T.collection("users").doc(n).get().then((function(e){var t=e.data();a(d({isSignedIn:!0,role:t.role,uid:t.uid,userName:t.username})),a(Object(k.d)("/"))}))}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r,s))}}),Object(W.jsxs)("div",{className:"sub-menu",children:[Object(W.jsx)(H,{text:"Forgot Password",action:function(){return e(Object(k.d)("/reset"))}}),Object(W.jsx)(H,{text:"Create Account",action:function(){return e(Object(k.d)("/signup"))}})]})]})},Z=L.a.div(E||(E=Object(g.a)(["\n  .title {\n    font-size: 24px;\n    margin-bottom: 32px;\n    color: #fff;\n  }\n  .sub-menu {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 16px;\n    color: #fff;\n  }\n"]))),$=function(){var e=Object(i.d)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),u=Object(m.a)(o,2),s=u[0],l=u[1],b=Object(a.useState)(""),j=Object(m.a)(b,2),d=j[0],f=j[1],p=Object(a.useState)(""),O=Object(m.a)(p,2),x=O[0],h=O[1],g=Object(a.useCallback)((function(e){c(e.target.value)}),[c]),v=Object(a.useCallback)((function(e){l(e.target.value)}),[l]),N=Object(a.useCallback)((function(e){f(e.target.value)}),[f]),S=Object(a.useCallback)((function(e){h(e.target.value)}),[h]);return Object(W.jsxs)(Z,{children:[Object(W.jsx)("h2",{className:"title",children:"SignUp"}),Object(W.jsx)(R,{label:"username",value:r,onChange:g}),Object(W.jsx)(R,{label:"email",value:s,onChange:v}),Object(W.jsx)(R,{label:"password",type:"password",value:d,onChange:N}),Object(W.jsx)(R,{label:"password",type:"password",value:x,onChange:S}),Object(W.jsx)(K,{label:"SignUp",action:function(){return e(function(e,t,n,a){return function(){var r=Object(w.a)(y.a.mark((function r(c){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(""!==e&&""!==t&&""!==n&&""!==a){r.next=3;break}return alert("\u5fc5\u9808\u304c\u7a7a\u3067\u3059"),r.abrupt("return",!1);case 3:if(n===a){r.next=6;break}return alert("\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u3066\u3044\u307e\u305b\u3093"),r.abrupt("return",!1);case 6:return r.abrupt("return",F.createUserWithEmailAndPassword(t,n).then((function(n){var a=n.user;if(a){var r=a.uid,i=U.now(),o={created_at:i,email:t,role:"cusotmer",uid:r,update_at:i,username:e};T.collection("users").doc(r).set(o).then((function(){return c(Object(k.d)("/"))}))}})));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(r,s,d,x))}}),Object(W.jsxs)("div",{className:"sub-menu",children:[Object(W.jsx)(H,{text:"",action:function(){return alert("\u3044\u3044\u3044")}}),Object(W.jsx)(H,{text:"Signin",action:function(){return e(Object(k.d)("/signin"))}})]})]})},ee=n.p+"static/media/login-back.b84ce1aa.png",te=L.a.div(_||(_=Object(g.a)(["\n  height: 100vh;\n  position: relative;\n  background-size: cover;\n\n  .overlay {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background: #000;\n    opacity: 0.4;\n  }\n\n  .container {\n    width: 320px;\n    margin: 0 auto;\n    padding-top: 88px;\n    position: relative;\n    text-align: center;\n  }\n"]))),ne=function(){var e=window.location.pathname,t=Object(a.useState)(!0),n=Object(m.a)(t,2),r=(n[0],n[1]),c=Object(a.useState)("signin"),i=Object(m.a)(c,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){r(!!e.split("/")[1].match(/^signin(#)?/))}),[e]),Object(a.useEffect)((function(){u(e.split("/")[1].replace("#",""))}),[e]),Object(W.jsxs)(te,{style:{backgroundImage:"url(".concat(ee,")")},children:[Object(W.jsx)("div",{className:"overlay"}),Object(W.jsxs)("div",{className:"container",children:["signin"===o&&Object(W.jsx)(Y,{}),"signup"===o&&Object(W.jsx)($,{}),"reset"===o&&Object(W.jsx)(V,{})]})]})},ae=n(30),re=function(e){return e.users},ce=Object(ae.a)([re],(function(e){return e.isSignedIn})),ie=Object(ae.a)([re],(function(e){return e.uid})),oe=Object(ae.a)([re],(function(e){return e.userName})),ue=function(){var e=Object(i.d)(),t=Object(i.e)((function(e){return e})),n=ie(t),a=oe(t);return Object(W.jsxs)("div",{children:[Object(W.jsx)("h2",{children:"\u30db\u30fc\u30e0\u30fc"}),Object(W.jsxs)("p",{children:["uid\uff1a",n]}),Object(W.jsxs)("p",{children:["username\uff1a",a]}),Object(W.jsx)("button",{onClick:function(){return e(function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.signOut().then((function(){t({type:"SIGN_OUT",payload:{isSignedIn:!0,role:"",uid:"",userName:""}}),t(Object(k.d)("/signin"))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Sign Out"})]})},se=function(e){var t=e.children,n=Object(i.d)(),r=Object(i.e)((function(e){return e})),c=ce(r);return Object(a.useEffect)((function(){c||n(function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.onAuthStateChanged((function(e){if(e){var n=e.uid;T.collection("users").doc(n).get().then((function(e){var n=e.data();t(d({isSignedIn:!0,role:"customer",uid:n.uid,userName:n.username})),t(Object(k.d)("/"))}))}else t(Object(k.d)("/signin"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n,c]),c?t:Object(W.jsx)(W.Fragment,{})},le=function(){return Object(W.jsxs)(h.c,{children:[Object(W.jsx)(h.a,{exact:!0,path:"/signup",component:ne}),Object(W.jsx)(h.a,{exact:!0,path:"/signin",component:ne}),Object(W.jsx)(h.a,{exact:!0,path:"/reset",component:ne}),Object(W.jsx)(se,{children:Object(W.jsx)(h.a,{exact:!0,path:"(/)?",component:ue})})]})},be=(n(61),n(62),function(){return Object(W.jsx)("main",{className:"c-main",children:Object(W.jsx)(le,{})})}),je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},de=x.a(),fe=(A=de,Object(o.d)(Object(o.c)({router:Object(u.b)(A),users:O}),Object(o.a)(Object(s.a)(A),l.a)));c.a.render(Object(W.jsx)(i.a,{store:fe,children:Object(W.jsx)(u.a,{history:de,children:Object(W.jsx)(be,{})})}),document.getElementById("root")),je()}},[[63,1,2]]]);
//# sourceMappingURL=main.a53a9d15.chunk.js.map